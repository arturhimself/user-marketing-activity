(()=>{"use strict";var s={373:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;const i=s(107),r={time:60};e.App=class{constructor(t,e){this.storageService=e,this.events={document:["click","mousemove","touchmove","scroll","input"],input:["focus","blur"],button:["focus","blur"]},this.wasActivity=!1,this.options={...r,...t},this.stepsAmount=this.options.time/10,this.currentStep=this.storageService.hasItem()?Number(this.storageService.getItem()):1,this.stepsAmount!==this.currentStep&&(this.handleClientActivity=(0,i.throttle)(this.handleClientActivity.bind(this),500),this.start())}start(){this.setListeners(),this.intervalId=setInterval(()=>{this.currentStep===this.stepsAmount?this.onSuccess():this.wasActivity&&(this.currentStep++,this.storageService.setItem(this.currentStep),this.wasActivity=!1)},1e4)}onSuccess(){this.clear(),this.options.onSuccess()}clear(){this.removeListeners(),this.intervalId&&clearInterval(this.intervalId)}removeListeners(){this.handleListeners("remove")}setListeners(){this.handleListeners("set")}handleListeners(t){const i="remove"===t?"removeEventListener":"addEventListener";Object.entries(this.events).forEach(([s,t])=>{t.forEach(t=>{var e;"document"===s?document[i](t,this.handleClientActivity):null!=(e=document.querySelector(s))&&e[i](t,this.handleClientActivity)})})}handleClientActivity(){this.wasActivity||(this.wasActivity=!0)}}},107:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=void 0;e.throttle=(e,s=1e3)=>{let i=!1;return t=>{i||(i=!0,setTimeout(()=>{i=!1,e(t)},s))}}},287:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StorageService=void 0;const s="activityStep";e.StorageService=class{getItem(){return Number(localStorage.getItem(s))}setItem(t){return localStorage.setItem(s,JSON.stringify(t))}hasItem(){return Boolean(localStorage.getItem(s))}}}},i={};function r(t){var e=i[t];if(void 0!==e)return e.exports;e=i[t]={exports:{}};return s[t](e,e.exports,r),e.exports}var t={};{var e=t;const n=r(373),o=r(287);e.default=t=>{new n.App(t,new o.StorageService)}}window.userMarketingActivity=t.default})();